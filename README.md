
# MPI SQL Coursework
Программная реализация курсовой работы по дисциплине "Высокопроизводительные вычисления" на тему "Параллельная обработка SQL-запросов с применением MPI.NET"

Выполнили студенты группы 4293:
- Иванов Я.В.
- Кондратьев В.Л.

Проверил: доцент кафедры КС Гибадуллин Р.Ф.

Казань, КНИТУ-КАИ им. А.Н.Туполева, ИКТЗИ, КС, 2023

## Необходимые компоненты
> Примечания. Для загрузки установочных файлов программ можно воспользоваться ссылками

Для работы программы требуется установка следующих компонентов:
- СУБД. В работе использована СУБД [SQL Express](https://www.microsoft.com/ru-ru/download/details.aspx?id=35579) (+ MS SQL Management Studio - опционально)
- База данный. В работе использована тестовая база данных TSQL2012, развёрнутая с помощью [SQL скрипта](./sql/TSQL2012.sql) в СУБД SQL Express
- [MS MPI](https://www.microsoft.com/en-us/download/details.aspx?id=57467) - утилиты и библиотеки, позволяющие разрабатывать и запускать MPI-приложения без необходимости создания кластера
- Пакеты NuGet (установка через среду Visual Studio):
  - [Dapper](https://www.nuget.org/packages/Dapper/2.1.24?_src=template) - объектно-реляционный модуль сопоставления
  - [MPI.NET](https://www.nuget.org/packages/MPI.NET/1.4.0?_src=template) - высокопроизводительная и простая в использовании реализация интерфейса передачи сообщений (MPI) для среды Microsoft .NET

### Вспомогательные SQL скрипты
- [Пересоздание таблицы dbo.Nums](./sql/nums_recreate_table.sql)
- [Подсчёт количества строк в таблице dbo.Nums](./sql/nums_get_row_count.sql)

## Программа
### Выполняемые запросы
Программа выполняет SQL запросы типа `DELETE` на удаление строк из определённой таблицы БД на множестве процессов, где каждый процесс получает свой отрендеренный список запросов с идентификаторами строк. Суммарное количество строк исходной таблицы dbo.Nums, используемой в работе, составляет 100 тысяч строк. Количество SQL запросов, выполняемое программой, предопределяется в коде программы перед её сборкой.

Например, чтобы программа выполняла 6400 запросов к базе данных, строка определния запроса в объекте `Delete` будет выглядеть следующим образом:
```csharp
// Queries.cs
public static List<string> Delete = Enumerable.Repeat("delete from dbo.Nums where n = ", 6400).ToList();
```

### Сборка программы
Для сборки программы в среде Visual Studio, можно воспользоваться сочетанием клавиш `Ctrl + Shift + B`. Полученный исполняемый файл будет расположен по пути `.\MPI_SQL_Coursework\bin\Debug\MPI_SQL_Coursework.exe` (относительно "корня" проекта).

### Запуск программы
Для запуска программы выполните команду `mpiexec` с ключом `-n`, указав необходимое число процессов + 1 (нулевой процесс - всегда родительский). Например, для тестирования программы с 4 параллельными процессами MPI, выполните команду:
```powershell
mpiexec -n 5 .\MPI_SQL_Coursework\bin\Debug\MPI_SQL_Coursework.exe
```
```
[LOG] Number of queries = 800 | Elapsed time = 98 ms
```